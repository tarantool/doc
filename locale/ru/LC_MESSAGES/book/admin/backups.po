
msgid "Backups"
msgstr "Резервное копирование"

msgid ""
"Tarantool has an append-only storage architecture: it appends data to "
"files but it never overwrites earlier data. The :ref:`Tarantool garbage "
"collector <cfg_checkpoint_daemon-garbage-collector>` removes old files "
"after a checkpoint. You can prevent or delay the garbage collector's "
"action by configuring the :ref:`checkpoint daemon "
"<book_cfg_checkpoint_daemon>`. Backups can be taken at any time, with "
"minimal overhead on database performance."
msgstr ""
"Архитектура Tarantool-хранилища позволяет производить обновление только "
"путем присоединения новых записей: сами файлы никогда не "
"перезаписываются. :ref:`Сборщик мусора Tarantool'а "
"<cfg_checkpoint_daemon-garbage-collector>` удаляет старые файлы после "
"определенной контрольной точки. В настройках :ref:`демона создания "
"контрольных точек <book_cfg_checkpoint_daemon>` можно отложить или "
"запретить работу сборщика мусора. Резервное копирование может проводиться"
" в любое время с минимальной затратой ресурсов."

msgid "Two functions are helpful for backups in certain situations:"
msgstr ""
"Для резервного копирования в определенных ситуациях используются две "
"функции:"

msgid ""
":doc:`/reference/reference_lua/box_backup/start` informs the server that "
"activities related to the removal of outdated backups must be suspended "
"and returns a table with the names of snapshot and vinyl files that "
"should be copied."
msgstr ""
":doc:`/reference/reference_lua/box_backup/start` сообщает серверу, что "
"следует отложить некоторые действия, связанные с удалением устаревших "
"резервных копий, и возвращает таблицу с именами файлов снимков и файлов "
"vinyl'а, которые необходимо будет скопировать."

msgid ""
":doc:`/reference/reference_lua/box_backup/stop` later informs the server "
"that normal operations may resume."
msgstr ""
":doc:`/reference/reference_lua/box_backup/stop` затем уведомляет сервер, "
"что работа может быть продолжена в обычном режиме."

msgid "Hot backup (memtx)"
msgstr "Горячее резервирование (memtx)"

msgid "This is a special case when there are only in-memory tables."
msgstr "Это особый случай, когда все таблицы хранятся в памяти."

msgid ""
"The last :ref:`snapshot file <index-box_persistence>` is a backup of the "
"entire database; and the :ref:`WAL <internals-wal>` files that are made "
"after the last snapshot are incremental backups. Therefore taking a "
"backup is a matter of copying the snapshot and WAL files."
msgstr ""
"Последний созданный Tarantool'ом :ref:`файл-снимок <index-"
"box_persistence>` является резервной копией всей базы данных; а "
":ref:`WAL-файлы <internals-wal>`, созданные следом за последним "
"файлом-снимком, являются инкрементными копиями. Поэтому процедура "
"резервирования сводится к копированию последнего файла-снимка и следующих"
" за ним WAL-файлов."

msgid ""
"Use ``tar`` to make a (possibly compressed) copy of the latest .snap and "
".xlog files on the :ref:`memtx_dir <cfg_basic-memtx_dir>` and "
":ref:`wal_dir <cfg_basic-wal_dir>` directories."
msgstr ""
"С помощью ``tar`` создайте (зачастую сжатую) копию последнего .snap-файла"
" и следующих за ним .xlog-файлов из директорий :ref:`memtx_dir "
"<cfg_basic-memtx_dir>` и :ref:`wal_dir <cfg_basic-wal_dir>`."

msgid "If there is a security policy, encrypt the .tar file."
msgstr "Если того требуют правила безопасности, зашифруйте получившийся .tar-файл."

msgid "Copy the .tar file to a safe place."
msgstr "Скопируйте .tar-файл в надежное место."

msgid ""
"Later, restoring the database is a matter of taking the .tar file and "
"putting its contents back in the ``memtx_dir`` and ``wal_dir`` "
"directories."
msgstr ""
"В дальнейшем базу данных можно восстановить, разархивировав содержимое "
".tar-файла в директории ``memtx_dir`` и ``wal_dir``."

msgid "Hot backup (vinyl/memtx)"
msgstr "Горячее резервирование (vinyl/memtx)"

msgid ""
"Vinyl stores its files in :ref:`vinyl_dir <cfg_basic-vinyl_dir>`, and "
"creates a folder for each database space. Dump and compaction processes "
"are append-only and create new files. The Tarantool garbage collector may"
" remove old files after each checkpoint."
msgstr ""
"Vinyl хранит свои файлы в :ref:`vinyl_dir <cfg_basic-vinyl_dir>` и "
"создает для каждого спейса в базе данных отдельную поддиректорию. "
"Создание дампов и слияние -- это процессы, которые могут лишь добавлять "
"записи, поэтому в результате создаются новые файлы. Сборщик мусора "
"Tarantool'а может удалять старые файлы после каждой контрольной точки."

msgid "To take a mixed backup:"
msgstr "Для создания смешанной резервной копии:"

msgid ""
"Issue :doc:`/reference/reference_lua/box_backup/start` on the "
":ref:`administrative console <admin-security>`. This will return a list "
"of files to back up and suspend garbage collection for them till the next"
" ``box.backup.stop()``."
msgstr ""
"Выполните команду :doc:`/reference/reference_lua/box_backup/start` в "
":ref:`административной консоли <admin-security>`. Эта команда покажет "
"список файлов для резервирования и приостановит сборку мусора до "
"следующего вызова ``box.backup.stop()``."

msgid ""
"Copy the files from the list to a safe location. This will include memtx "
"snapshot files, vinyl run and index files, at a state consistent with the"
" last checkpoint."
msgstr ""
"Скопируйте файлы из списка в надежное место. Это касается файлов-снимков "
"memtx, выполняемых vinyl-файлов и индексных файлов, соответствующих "
"последней контрольной точке."

msgid ""
"Issue :doc:`/reference/reference_lua/box_backup/stop` so the garbage "
"collector can continue as usual."
msgstr ""
"Выполните команду :doc:`/reference/reference_lua/box_backup/stop`, чтобы "
"сборщик мусора мог продолжить работу."

msgid "Continuous remote backup (memtx)"
msgstr "Непрерывное удаленное резервирование"

msgid ""
"The :ref:`replication <replication>` feature is useful for backup as well"
" as for load balancing."
msgstr ""
":ref:`Репликация <replication>` используется не только для "
"резервирования, но и для выравнивания нагрузки."

msgid ""
"Therefore taking a backup is a matter of ensuring that any given replica "
"is up to date, and doing a cold backup on it. Since all the other "
"replicas continue to operate, this is not a cold backup from the end "
"user’s point of view. This could be done on a regular basis, with a "
"``cron`` job or with a Tarantool fiber."
msgstr ""
"Поэтому процесс создания резервной копии сводится к обновлению (при "
"необходимости) одной из реплик с последующим холодным резервированием. "
"Так как все остальные реплики продолжают функционировать, с точки зрения "
"конечного пользователя, этот процесс не является холодным "
"резервированием. Такое резервирование можно выполнять регулярно с помощью"
"  планировщика ``cron`` или файбера Tarantool'а."

msgid "Continuous backup (memtx)"
msgstr "Непрерывное резервирование"

msgid ""
"The logged changes done since the last cold backup must be secured, while"
" the system is running."
msgstr ""
"По ходу работы системы необходимо сохранять записи об изменениях, "
"внесенных со времени последнего холодного резервирования."

msgid ""
"For this purpose, you need a file copy utility that will do the copying "
"remotely and continuously, copying only the parts of a write ahead log "
"file that are changing. One such utility is `rsync "
"<https://en.wikipedia.org/wiki/Rsync>`_."
msgstr ""
"Для этого нужна специальная утилита для копирования файлов (например, "
"`rsync <https://en.wikipedia.org/wiki/rsync>`_), которая позволит "
"удаленно и на постоянной основе копировать только изменившиеся части "
"WAL-файла, а не весь файл целиком."

msgid ""
"Alternatively, you need an ordinary file copy utility, but there should "
"be frequent production of new snapshot files or new WAL files as changes "
"occur, so that only the new files need to be copied."
msgstr ""
"Можно взять и обычную утилиту для копирования целых файлов, но тогда "
"придется создавать файлы-снимки и WAL-файлы на каждое изменение, чтобы "
"нужно было копировать только новые файлы."
