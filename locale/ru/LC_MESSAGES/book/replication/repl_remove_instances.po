
msgid "Removing instances"
msgstr "Удаление экземпляров"

msgid ""
"Let's assume that we have the following configured replica set with 3 "
"instances (*instance1*, *instance2* and *intance3*) and we want to remove"
" *instance2*."
msgstr ""
"Предположим, что у нас настроен следующий набор реплик с 3 экземплярами "
"(*instance1*, *instance2* и *instance3*), и мы хотим удалить *instance2*."

msgid "To remove it politely, follow these steps:"
msgstr ""
"Чтобы правильно удалить экземпляр из набора реплик, выполните следующие "
"шаги:"

msgid "Disconnect *instance2* from the cluster."
msgstr "Отключите *instance2* от кластера."

msgid "Disconnect the cluster from *instance2*."
msgstr "Отключите кластер от *instance2*."

msgid "Remove *instance2* from the ``_cluster`` space."
msgstr "Исключите *instance2* из системного спейса ``_cluster``."

msgid "**Step 1: disconnecting an instance from the cluster**"
msgstr "**Шаг 1: отключение экземпляра от кластера**"

msgid ""
"On the disconnecting instance *instance2*, run ``box.cfg{}`` with a blank"
" replication source:"
msgstr ""
"На отключаемом *instance2* выполните ``box.cfg{}`` с пустым источником "
"репликации:"

msgid "tarantool> box.cfg{replication=''}"
msgstr ""

msgid ""
"Then check that it was disconnected. Take a look at "
"``box.info.replication`` on *instance2* (notice that "
"``replication.{1,3}.upstream`` is absent):"
msgstr ""
"Теперь проверьте, что экземпляр был отсоединен. Взгляните на "
"``box.info.replication`` на *instance2* (заметьте, что строки для "
"``replication.{1,3}.upstream`` отсутствуют):"

msgid ""
"tarantool> box.info.replication\n"
"---\n"
"- 1:\n"
"   id: 1\n"
"   uuid: db89978f-7115-4537-8417-9982bb5a256f\n"
"   lsn: 9\n"
"-- upstream is absent\n"
"   downstream:\n"
"      status: follow\n"
"      idle: 0.93983899999876\n"
"      vclock: {1: 9}\n"
"2:\n"
"   id: 2\n"
"   uuid: 0a756d14-e437-4296-85b0-d27a0621613e\n"
"   lsn: 0\n"
"3:\n"
"   id: 3\n"
"   uuid: bb362584-c265-4e53-aeb6-450ae818bf59\n"
"   lsn: 0\n"
"-- upstream is absent\n"
"   downstream:\n"
"      status: follow\n"
"      idle: 0.26624799999991\n"
"      vclock: {1: 9}\n"
"..."
msgstr ""

msgid ""
"Check *instance1* and *instance3* as well (notice that the status of "
"``replication.2.downstream`` is ``stopped``):"
msgstr ""
"Проверьте также *instance1* и *instance3* (заметьте, что статус "
"``replication.2.downstream`` поменялся на ``stopped``):"

msgid ""
"-- instance1\n"
"tarantool> box.info.replication\n"
"---\n"
"- 1:\n"
"   id: 1\n"
"   uuid: db89978f-7115-4537-8417-9982bb5a256f\n"
"   lsn: 9\n"
"2:\n"
"   id: 2\n"
"   uuid: 0a756d14-e437-4296-85b0-d27a0621613e\n"
"   lsn: 0\n"
"   upstream:\n"
"      status: follow\n"
"      idle: 0.3533439999992\n"
"      peer: replicator@localhost:3302\n"
"      lag: 0.0001220703125\n"
"   downstream:\n"
"      status: stopped     -- status has changed:\n"
"      message: unexpected EOF when reading from socket, called on fd 13, "
"aka [::1]:3301,\n"
"      peer of [::1]:53776\n"
"      system_message: Broken pipe\n"
"3:\n"
"   id: 3\n"
"   uuid: bb362584-c265-4e53-aeb6-450ae818bf59\n"
"   lsn: 0\n"
"   upstream:\n"
"      status: follow\n"
"      idle: 0.35327999999936\n"
"      peer: replicator@localhost:3303\n"
"      lag: 0.00018095970153809\n"
"   downstream:\n"
"      status: follow\n"
"      idle: 0.68685100000221\n"
"      vclock: {1: 9}\n"
"..."
msgstr ""

msgid "**Step 2: disconnecting the cluster from the decommissioned instance**"
msgstr "**Шаг 2: отключение кластера от удаляемого экземпляра**"

msgid ""
"On every other instance in the cluster remove *instance2* from the "
"``box.cfg{ replication }`` list and call an appropriate ``box.cfg{ "
"replication = {instance1, instance3} }``:"
msgstr ""
"На всех остальных экземплярах в кластере уберите *instance2* из списка "
"``box.cfg{ replication }`` и вызовите актуальный список ``box.cfg{ "
"replication = {instance1, instance3} }``:"

msgid "tarantool> box.cfg{ replication = { 'instance1-uri', 'instance3-uri' } }"
msgstr ""

msgid ""
"Take a look at ``box.info.replication`` on *instance2* to check that "
"*instance1* and *instance3* were disconnected (notice that the status of "
"``replication.{1,3}.downstream`` is ``stopped``):"
msgstr ""
"Взгляните на ``box.info.replication`` на *instance2*, чтобы убедиться, "
"что ``instance1`` и ``instance3`` были отсоединены (заметьте, что статус "
"``replication.2.downstream`` поменялся на ``stopped``):"

msgid ""
"tarantool> box.info.replication\n"
"---\n"
"- 1:\n"
"   id: 1\n"
"   uuid: db89978f-7115-4537-8417-9982bb5a256f\n"
"   lsn: 9\n"
"   downstream:\n"
"      status: stopped    -- status has changed\n"
"      message: unexpected EOF when reading from socket, called on fd 16, "
"aka [::1]:3302,\n"
"      peer of [::1]:53832\n"
"      system_message: Broken pipe\n"
"2:\n"
"   id: 2\n"
"   uuid: 0a756d14-e437-4296-85b0-d27a0621613e\n"
"   lsn: 0\n"
"3:\n"
"   id: 3\n"
"   uuid: bb362584-c265-4e53-aeb6-450ae818bf59\n"
"   lsn: 0\n"
"   downstream:\n"
"      status: stopped    -- status has changed\n"
"      message: unexpected EOF when reading from socket, called on fd 18, "
"aka [::1]:3302,\n"
"      peer of [::1]:53825\n"
"      system_message: Broken pipe\n"
"..."
msgstr ""

msgid ""
"Check *instance1* and *instance3* as well (notice that the status of "
"``replication.2.upstream`` is ``stopped``):"
msgstr ""
"Проверьте также *instance1* и *instance3* (заметьте, что статус "
"``replication.2.upstream`` поменялся на ``stopped``):"

msgid ""
"-- instance1\n"
"tarantool> box.info.replication\n"
"---\n"
"- 1:\n"
"   id: 1\n"
"   uuid: db89978f-7115-4537-8417-9982bb5a256f\n"
"   lsn: 9\n"
"2:\n"
"   id: 2\n"
"   uuid: 0a756d14-e437-4296-85b0-d27a0621613e\n"
"   lsn: 0\n"
"   downstream:\n"
"      status: stopped   -- status has changed\n"
"      message: unexpected EOF when reading from socket, called on fd 13, "
"aka [::1]:3301,\n"
"      peer of [::1]:53776\n"
"      system_message: Broken pipe\n"
"3:\n"
"   id: 3\n"
"   uuid: bb362584-c265-4e53-aeb6-450ae818bf59\n"
"   lsn: 0\n"
"   upstream:\n"
"      status: follow\n"
"      idle: 0.50240100000156\n"
"      peer: replicator@localhost:3303\n"
"      lag: 0.00015711784362793\n"
"   downstream:\n"
"      status: follow\n"
"      idle: 0.14237199999843\n"
"      vclock: {1: 9}\n"
"..."
msgstr ""

msgid "**Step 3: persistent removal**"
msgstr "**Шаг 3: окончательное удаление**"

msgid ""
"If a removed instance rejoins later, it will receive all the updates made"
" by the other instances while it was disconnected."
msgstr ""
"Если выбывший экземпляр снова вернется в кластер, то он получит "
"информацию обо всех изменениях, которые произошли на остальных "
"экземплярах за время его отсутствия."

msgid ""
"If an instance is decommissioned forever, we should clean up the "
"``_cluster`` space. First, discover the ``id`` and ``uuid`` of the "
"instance. On *instance2*, call ``return box.info.id, box.info.uuid``:"
msgstr ""
"Если экземпляр нужно вывести из эксплуатации навсегда, то нужно очистить "
"``cluster`` спейс. Для этого сначала узнайте ``id`` и ``uuid`` удаляемого"
" экземпляра. На *instance2* вызовите ``return box.info.id, "
"box.info.uuid``:"

msgid ""
"tarantool> return box.info.id, box.info.uuid\n"
"---\n"
"- 2\n"
"- '0a756d14-e437-4296-85b0-d27a0621613e'\n"
"..."
msgstr ""

msgid "Take a note of ``id`` and ``uuid``."
msgstr "Запомните ``id`` and ``uuid``."

msgid ""
"Now choose any master from the remaining cluster and perform the "
"following actions on it (let's assume that we chose *instance1*):"
msgstr ""
"Теперь выберите любой мастер из оставшегося кластера и выполните на нем "
"следующие действия (предположим, это будет *instance1*):"

msgid "Select all records from the ``_cluster`` space:"
msgstr "Запросите все записи из спейса ``_cluster``:"

msgid ""
"tarantool> box.space._cluster:select{}\n"
"---\n"
"- - [1, 'db89978f-7115-4537-8417-9982bb5a256f']\n"
"- [2, '0a756d14-e437-4296-85b0-d27a0621613e']\n"
"- [3, 'bb362584-c265-4e53-aeb6-450ae818bf59']\n"
"..."
msgstr ""

msgid ""
"2. Check if the ``id`` and ``uuid`` of *instance2* are correct and remove"
" them from the cluster:"
msgstr ""
"2.Проверьте корректность ``id`` и ``uuid`` *instance2* и удалите их из "
"кластера:"

msgid ""
"tarantool> box.space._cluster:delete(2)\n"
"---\n"
"- [2, '0a756d14-e437-4296-85b0-d27a0621613e']\n"
"..."
msgstr ""

msgid "**Final checks**"
msgstr ""

msgid ""
"After all modifications, say ``box.info.replication`` to check the health"
" status."
msgstr ""
"После всех модификаций выполните ``box.info.replication``, чтобы "
"проверить, что состояние кластера теперь корректное."
