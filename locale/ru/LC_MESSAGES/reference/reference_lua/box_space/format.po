
msgid "space_object:format()"
msgstr "space_object:format()"

msgid "Declare field names and :ref:`types <index-box_data-types>`."
msgstr "Объявление имен и :ref:`типов <index-box_data-types>` полей."

msgid "Parameters"
msgstr "Параметры"

msgid "an :ref:`object reference <app_server-object_reference>`"
msgstr ":ref:`ссылка на объект <app_server-object_reference>`"

msgid "a list of field names and types"
msgstr "список имен и типов полей"

msgid "return"
msgstr "возвращает"

msgid "``nil``, unless format-clause is omitted"
msgstr "``nil``, если не указан оператор формата"

msgid "**Possible errors:**"
msgstr "**Возможные ошибки:**"

#, fuzzy
msgid "``space_object`` does not exist"
msgstr "``space_object`` не существует,"

#, fuzzy
msgid "field names are duplicated"
msgstr "дублируются имена полей;"

#, fuzzy
msgid "type is not legal"
msgstr "тип не поддерживается."

msgid ""
"If you need to make a schema migration, see section :ref:`Migrations "
"<migrations>`."
msgstr ""
"Если вам нужно выполнить миграцию схемы, обратитесь к разделу :ref:`Миграции"
" <migrations>`."

msgid ""
"Ordinarily Tarantool allows unnamed untyped fields. But with ``format`` "
"users can, for example, document that the Nth field is the surname field and"
" must contain strings. It is also possible to specify a format clause in "
":doc:`box.schema.space.create() "
"</reference/reference_lua/box_schema/space_create>`."
msgstr ""
"Как правило, Tarantool допускает поля без имен и без указания типа. Но с "
"помощью ``format`` можно, например, задокументировать, что N-ное поле "
"представляет собой поле для фамилии и должно содержать строковое значение. "
"Также оператор формата можно указать в :doc:`box.schema.space.create() "
"</reference/reference_lua/box_schema/space_create>`."

msgid ""
"The format clause contains, for each field, a definition within braces: "
"``{name='...',type='...'[,is_nullable=...]}``, where:"
msgstr ""
"Оператор формата для каждого поля содержит определение в фигурных скобках: "
"``{name='...',type='...'[,is_nullable=...]}``, где:"

#, fuzzy
msgid ""
"The ``name`` value may be any string, provided that two fields do not have "
"the same name."
msgstr ""
"значение ``name`` может представлять собой любую строку при условии, что у "
"двух полей не будет одинаковых имен;"

#, fuzzy
msgid ""
"The ``type`` value may be any of allowed types: any | unsigned | string | "
"integer | number | varbinary | boolean | double | decimal | uuid | array | "
"map | scalar, but for creating an index use only :ref:`indexed fields "
"<index-box_indexed-field-types>`;"
msgstr ""
"значением ``type`` может быть любой из разрешенных типов: any | unsigned | "
"string | integer | number | varbinary | boolean | double | decimal | uuid | "
"array | map | scalar, но для создания индекса следует использовать только "
":ref:`индексируемые типы <index-box_indexed-field-types>`; "

msgid ""
"(Optional) The ``is_nullable`` boolean value specifies whether ``nil`` can "
"be used as a field value. See also: :ref:`key_part.is_nullable "
"<key_part_is_nullable>`."
msgstr ""

msgid ""
"(Optional) The ``collation`` string value specifies the :ref:`collation "
"<index-collation>` used to compare field values. See also: "
":ref:`key_part.collation <key_part_collation>`."
msgstr ""

msgid ""
"(Optional) The ``constraint`` table specifies the :ref:`constraints <index-"
"constraints>` that the field value must satisfy."
msgstr ""

msgid ""
"(Optional) The ``foreign_key`` table specifies the :ref:`foreign keys "
"<index-box_foreign_keys>` for the field."
msgstr ""

msgid ""
"It is not legal for tuples to contain values that have the wrong type. The "
"example below will cause an error:"
msgstr ""
"В кортежах недопустимы значения неправильного типа. Пример ниже вызовет "
"ошибку:"

msgid ""
"--This example will cause an error.\n"
"box.space.tester:format({{' ',type='number'}})\n"
"box.space.tester:insert{'string-which-is-not-a-number'}"
msgstr ""
"--Этот пример вызовет ошибку.\n"
"box.space.tester:format({{' ',type='number'}})\n"
"box.space.tester:insert{'string-which-is-not-a-number'}"

msgid ""
"It is not legal for tuples to contain null values if ``is_nullable=false``, "
"which is the default. The example below will cause an error:"
msgstr ""
"В кортежах недопустимы нулевые значения, если ``is_nullable=false``, что "
"задано по умолчанию. Пример ниже вызовет ошибку:"

msgid ""
"--This example will cause an error.\n"
"box.space.tester:format({{' ',type='number',is_nullable=false}})\n"
"box.space.tester:insert{nil,2}"
msgstr ""
"--Этот пример вызовет ошибку.\n"
"box.space.tester:format({{' ',type='number',is_nullable=false}})\n"
"box.space.tester:insert{nil,2}"

msgid ""
"It is legal for tuples to have more fields than are described by a format "
"clause. The way to constrain the number of fields is to specify a space's "
":doc:`field_count </reference/reference_lua/box_space/field_count>` member."
msgstr ""
"В кортежах может быть больше полей, чем описано в операторе формата. Чтобы "
"ограничить количество полей, необходимо указать для спейса элемент "
":doc:`field_count </reference/reference_lua/box_space/field_count>`."

msgid ""
"It is legal for tuples to have fewer fields than are described by a format "
"clause, if the omitted trailing fields are described with "
"``is_nullable=true``. For example, the request below will not cause a "
"format-related error:"
msgstr ""
"В кортежах может быть меньше полей, чем описано в операторе формата, если "
"пропущенные завершающие поля описаны с помощью ``is_nullable=true``. "
"Например, запрос ниже не приведет к ошибке формата:"

msgid ""
"box.space.tester:format({{'a',type='number'},{'b',type='number',is_nullable=true}})\n"
"box.space.tester:insert{2}"
msgstr ""
"box.space.tester:format({{'a',type='number'},{'b',type='number',is_nullable=true}})\n"
"box.space.tester:insert{2}"

msgid ""
"It is legal to use ``format`` on a space that already has a format, thus "
"replacing any previous definitions, provided that there is no conflict with "
"existing data or index definitions."
msgstr ""
"Можно использовать ``format`` для спейса, в котором уже определен формат, "
"заменяя таким образом предыдущие определения при условии, что нет конфликта "
"с существующими данными или определениями индекса."

msgid ""
"It is legal to use ``format`` to change the ``is_nullable`` flag. The "
"example below will not cause an error -- and will not cause rebuilding of "
"the space."
msgstr ""
"Можно использовать ``format`` для того, чтобы изменить значение флага "
"``is_nullable``. Пример ниже не вызовет ошибки -- и не приведет к "
"перестроению спейса."

msgid ""
"box.space.tester:format({{' ',type='scalar',is_nullable=false}})\n"
"box.space.tester:format({{' ',type='scalar',is_nullable=true}})"
msgstr ""
"box.space.tester:format({{' ',type='scalar',is_nullable=false}})\n"
"box.space.tester:format({{' ',type='scalar',is_nullable=true}})"

msgid ""
"But going the other way and changing ``is_nullable`` from ``true`` to "
"``false`` might cause rebuilding and might cause an error if there are "
"existing tuples with nulls."
msgstr ""
"Но обратное изменение значение ``is_nullable`` с ``true`` на ``false`` может"
" вызвать перестроение и привести к ошибке, если уже есть кортежи с нулевыми "
"значениями."

msgid "**Example:**"
msgstr "**Пример:**"

msgid ""
"box.space.tester:format({{name='surname',type='string'},{name='IDX',type='array'}})\n"
"box.space.tester:format({{name='surname',type='string',is_nullable=true}})"
msgstr ""
"box.space.tester:format({{name='surname',type='string'},{name='IDX',type='array'}})\n"
"box.space.tester:format({{name='surname',type='string',is_nullable=true}})"

msgid "There are legal variations of the format clause:"
msgstr "Можно использовать следующие варианты оператора:"

msgid "omitting both 'name=' and 'type=',"
msgstr "пропуск и 'name=', и 'type=',"

msgid "omitting 'type=' alone,"
msgstr "пропуск только 'type=',"

msgid "adding extra braces."
msgstr "добавление дополнительных фигурных скобок."

msgid ""
"The following examples show all the variations, first for one field named "
"'x', second for two fields named 'x' and 'y'."
msgstr ""
"В следующем примере иллюстрируются все варианты, первый для поля с именем "
"'x', второй -- для двух полей с именами 'x' и 'y'."

msgid ""
"box.space.tester:format({{name='x',type='scalar'}})\n"
"box.space.tester:format({{name='x',type='scalar'},{name='y',type='unsigned'}})\n"
"\n"
"box.space.tester:format({{'x'}})\n"
"box.space.tester:format({{'x'},{'y'}})\n"
"\n"
"-- types\n"
"box.space.tester:format({{name='x'}})\n"
"box.space.tester:format({{name='x'},{name='y'}})\n"
"\n"
"box.space.tester:format({{'x',type='scalar'}})\n"
"box.space.tester:format({{'x',type='scalar'},{'y',type='unsigned'}})\n"
"\n"
"box.space.tester:format({{'x','scalar'}})\n"
"box.space.tester:format({{'x','scalar'},{'y','unsigned'}})"
msgstr ""
"box.space.tester:format({{name='x',type='scalar'}})\n"
"box.space.tester:format({{name='x',type='scalar'},{name='y',type='unsigned'}})\n"
"\n"
"box.space.tester:format({{'x'}})\n"
"box.space.tester:format({{'x'},{'y'}})\n"
"\n"
"-- типы\n"
"box.space.tester:format({{name='x'}})\n"
"box.space.tester:format({{name='x'},{name='y'}})\n"
"\n"
"box.space.tester:format({{'x',type='scalar'}})\n"
"box.space.tester:format({{'x',type='scalar'},{'y',type='unsigned'}})\n"
"\n"
"box.space.tester:format({{'x','scalar'}})\n"
"box.space.tester:format({{'x','scalar'},{'y','unsigned'}})"

msgid ""
"The following example shows how to create a space, format it with all "
"possible types, and insert into it."
msgstr ""
"В следующем примере показывается создание спейса, определение формата для "
"него со всеми возможными типа и вставка данных."

msgid ""
"tarantool> box.schema.space.create('t')\n"
"---\n"
"- engine: memtx\n"
"  before_replace: 'function: 0x4019c488'\n"
"  on_replace: 'function: 0x4019c460'\n"
"  ck_constraint: []\n"
"  field_count: 0\n"
"  temporary: false\n"
"  index: []\n"
"  is_local: false\n"
"  enabled: false\n"
"  name: t\n"
"  id: 534\n"
"- created\n"
"...\n"
"tarantool> ffi = require('ffi')\n"
"---\n"
"...\n"
"tarantool> decimal = require('decimal')\n"
"---\n"
"...\n"
"tarantool> uuid = require('uuid')\n"
"---\n"
"...\n"
"tarantool> box.space.t:format({{name = '1', type = 'any'},\n"
"         >                     {name = '2', type = 'unsigned'},\n"
"         >                     {name = '3', type = 'string'},\n"
"         >                     {name = '4', type = 'number'},\n"
"         >                     {name = '5', type = 'double'},\n"
"         >                     {name = '6', type = 'integer'},\n"
"         >                     {name = '7', type = 'boolean'},\n"
"         >                     {name = '8', type = 'decimal'},\n"
"         >                     {name = '9', type = 'uuid'},\n"
"         >                     {name = 'a', type = 'scalar'},\n"
"         >                     {name = 'b', type = 'array'},\n"
"         >                     {name = 'c', type = 'map'}})\n"
"---\n"
"...\n"
"tarantool> box.space.t:create_index('i',{parts={2, type = 'unsigned'}})\n"
"---\n"
"- unique: true\n"
"  parts:\n"
"  - type: unsigned\n"
"    is_nullable: false\n"
"    fieldno: 2\n"
"  id: 0\n"
"  space_id: 534\n"
"  type: TREE\n"
"  name: i\n"
"...\n"
"tarantool> box.space.t:insert{{'a'}, -- any\n"
"         >                    1, -- unsigned\n"
"         >                    'W?', -- string\n"
"         >                    5.5, -- number\n"
"         >                    ffi.cast('double', 1), -- double\n"
"         >                    -0, -- integer\n"
"         >                    true, -- boolean\n"
"         >                    decimal.new(1.2), -- decimal\n"
"         >                    uuid.new(), -- uuid\n"
"         >                    true, -- scalar\n"
"         >                    {{'a'}}, -- array\n"
"         >                    {val=1}} -- map\n"
"---\n"
"- [['a'], 1, 'W?', 5.5, 1, 0, true, 1.2, 1f41e7b8-3191-483d-b46e-1aa6a4b14557, true, [['a']], {'val': 1}]\n"
"..."
msgstr ""
"tarantool> box.schema.space.create('t')\n"
"---\n"
"- engine: memtx\n"
"  before_replace: 'function: 0x4019c488'\n"
"  on_replace: 'function: 0x4019c460'\n"
"  ck_constraint: []\n"
"  field_count: 0\n"
"  temporary: false\n"
"  index: []\n"
"  is_local: false\n"
"  enabled: false\n"
"  name: t\n"
"  id: 534\n"
"- created\n"
"...\n"
"tarantool> ffi = require('ffi')\n"
"---\n"
"...\n"
"tarantool> decimal = require('decimal')\n"
"---\n"
"...\n"
"tarantool> uuid = require('uuid')\n"
"---\n"
"...\n"
"tarantool> box.space.t:format({{name = '1', type = 'any'},\n"
"         >                     {name = '2', type = 'unsigned'},\n"
"         >                     {name = '3', type = 'string'},\n"
"         >                     {name = '4', type = 'number'},\n"
"         >                     {name = '5', type = 'double'},\n"
"         >                     {name = '6', type = 'integer'},\n"
"         >                     {name = '7', type = 'boolean'},\n"
"         >                     {name = '8', type = 'decimal'},\n"
"         >                     {name = '9', type = 'uuid'},\n"
"         >                     {name = 'a', type = 'scalar'},\n"
"         >                     {name = 'b', type = 'array'},\n"
"         >                     {name = 'c', type = 'map'}})\n"
"---\n"
"...\n"
"tarantool> box.space.t:create_index('i',{parts={2, type = 'unsigned'}})\n"
"---\n"
"- unique: true\n"
"  parts:\n"
"  - type: unsigned\n"
"    is_nullable: false\n"
"    fieldno: 2\n"
"  id: 0\n"
"  space_id: 534\n"
"  type: TREE\n"
"  name: i\n"
"...\n"
"tarantool> box.space.t:insert{{'a'}, -- any\n"
"         >                    1, -- unsigned\n"
"         >                    'W?', -- string\n"
"         >                    5.5, -- number\n"
"         >                    ffi.cast('double', 1), -- double\n"
"         >                    -0, -- integer\n"
"         >                    true, -- boolean\n"
"         >                    decimal.new(1.2), -- decimal\n"
"         >                    uuid.new(), -- uuid\n"
"         >                    true, -- scalar\n"
"         >                    {{'a'}}, -- array\n"
"         >                    {val=1}} -- map\n"
"---\n"
"- [['a'], 1, 'W?', 5.5, 1, 0, true, 1.2, 1f41e7b8-3191-483d-b46e-1aa6a4b14557, true, [['a']], {'val': 1}]\n"
"..."

msgid ""
"Names specified with the format clause can be used in "
":doc:`/reference/reference_lua/box_space/get` and in "
":doc:`/reference/reference_lua/box_space/create_index` and in "
":doc:`/reference/reference_lua/box_tuple/field_name` and in "
":doc:`/reference/reference_lua/box_tuple/field_path`."
msgstr ""
"Имена, указанные с помощью оператора формата, можно использовать в "
":doc:`/reference/reference_lua/box_space/get`, в "
":doc:`/reference/reference_lua/box_space/create_index`, в "
":doc:`/reference/reference_lua/box_tuple/field_name` и в "
":doc:`/reference/reference_lua/box_tuple/field_path`."

msgid ""
"If the format clause is omitted, then the returned value is the table that "
"was used in a previous :samp:`{space_object}:format({format-clause})` "
"invocation. For example, after "
"``box.space.tester:format({{'x','scalar'}})``, ``box.space.tester:format()``"
" will return ``[{'name': 'x', 'type': 'scalar'}]``."
msgstr ""
"Если оператор формата не указан, то вернется таблица, которая использовалась"
" при предыдущем вызове :samp:`{объект-спейса}:format({оператор-формата})`. "
"Например, после ``box.space.tester:format({{'x','scalar'}})``, "
"``box.space.tester:format()`` вернет ``[{'name': 'x', 'type': 'scalar'}]``."

#, fuzzy
msgid ""
"Formatting or reformatting a large space will cause occasional :ref:`yields "
"<app-yields>` so that other requests will not be blocked. If the other "
"requests cause an illegal situation such as a field value of the wrong type,"
" the formatting or reformatting will fail."
msgstr ""
"Форматирование или преобразование формата большого спейса будет периодически"
" вызывать :ref:`передачу управления <atomic-cooperative_multitasking>`, "
"чтобы не блокировать другие запросы. А если другой запрос приведет к ошибке,"
" например, значение поля будет неподходящего типа, форматирование или "
"преобразование формата не выполнится."

#, fuzzy
msgid ""
"**Note regarding storage engine:** vinyl supports formatting of non-empty "
"spaces. Primary index definition cannot be formatted."
msgstr ""
"**Примечание про движок базы данных:** vinyl поддерживает форматирование не "
"пустых спейсов. Определение первичного индекса форматировать нельзя."

#~ msgid ""
#~ "the optional ``is_nullable`` value may be either ``true`` or ``false`` (the "
#~ "same as the requirement in :ref:`\"Options for space_object:create_index\" "
#~ "<box_space-create_index-options>`). See also the warning notice in section "
#~ ":ref:`Allowing null for an indexed key <box_space-is_nullable>`."
#~ msgstr ""
#~ "значение необязательного параметра ``is_nullable`` может быть ``true`` или "
#~ "``false`` (такое же требование, как для :ref:`\"Параметров для "
#~ "space_object:create_index\" <box_space-create_index-options>`). См. также "
#~ "предупреждение в разделе :ref:`Разрешение использования нулевых значений для"
#~ " индексируемого ключа<box_space-is_nullable>`."
