
msgid "space_object:on_replace()"
msgstr "space_object:on_replace()"

msgid ""
"Create a \"replace :ref:`trigger <triggers>`\". The ``trigger-function`` "
"will be executed whenever a ``replace()`` or ``insert()`` or ``update()`` or"
" ``upsert()`` or ``delete()`` happens to a tuple in ``<space-name>``."
msgstr ""
"Создание \":ref:`триггера <triggers>` замены\". Функция-триггер ``trigger-"
"function`` будет выполняться в случае операции ``replace()`` или "
"``insert()``, или ``update()``, или ``upsert()``, или ``delete()`` над "
"кортежем в спейсе ``<space-name>``."

msgid "Parameters"
msgstr "Параметры"

msgid ""
"function which will become the trigger function; see Example 2 below for "
"details about trigger function parameters"
msgstr ""
"функция, в которой будет триггер; подробнее о параметрах функции с триггером"
" см. пример 2 ниже"

msgid ""
"existing trigger function which will be replaced by ``trigger-function``"
msgstr ""
"существующая функция-триггер, которую заменит новая ``trigger-function``"

msgid "return"
msgstr "возвращает"

msgid "nil or function pointer"
msgstr "nil или указатель функции"

msgid ""
"If the parameters are ``(nil, old-trigger-function)``, then the old trigger "
"is deleted."
msgstr ""
"Если указаны параметры ``(nil, old-trigger-function)``, то старый триггер "
"будет удален."

msgid ""
"If both parameters are omitted, then the response is a list of existing "
"trigger functions."
msgstr ""
"Если не указан ни один параметр, ответом будет список существующих функций с"
" триггером."

msgid ""
"If it is necessary to know whether the trigger activation happened due to "
"replication or on a specific connection type, the function can refer to "
":doc:`/reference/reference_lua/box_session/type`."
msgstr ""
"Следует знать, что если активация триггера произошла в случае репликации или"
" определенного вида подключения, функция может ссылаться на "
":doc:`/reference/reference_lua/box_session/type`."

msgid ""
"Details about trigger characteristics are in the :ref:`triggers <triggers-"
"box_triggers>` section."
msgstr ""
"Подробная информация о характеристиках триггера находится в разделе "
":ref:`Триггеры <triggers-box_triggers>`."

msgid "See also :doc:`/reference/reference_lua/box_space/before_replace`."
msgstr "См. также :doc:`/reference/reference_lua/box_space/before_replace`."

msgid "**Example 1:**"
msgstr "**Пример 1:**"

msgid ""
"tarantool> x = 0\n"
"         > function f ()\n"
"         >   x = x + 1\n"
"         > end\n"
"tarantool> box.space.my_space_name:on_replace(f)"
msgstr ""
"tarantool> x = 0\n"
"         > function f ()\n"
"         >   x = x + 1\n"
"         > end\n"
"tarantool> box.space.my_space_name:on_replace(f)"

msgid "**Example 2:**"
msgstr "**Пример 2:**"

msgid "The ``trigger-function`` can have up to four parameters:"
msgstr "В функции с триггером может быть до 4 параметров:"

msgid "(tuple) old value which has the contents before the request started,"
msgstr "(кортеж) старое значение до начала запроса,"

msgid "(tuple) new value which has the contents after the request ended,"
msgstr "(кортеж) новое значение после окончания выполнения запроса,"

msgid "(string) space name,"
msgstr "(строка) имя спейса,"

msgid ""
"(string) type of request which is ``INSERT``, ``DELETE``, ``UPDATE``, or "
"``REPLACE``."
msgstr ""
"(строка) тип запроса: ``INSERT`` (вставка), ``DELETE`` (удаление), "
"``UPDATE`` (обновление) или ``REPLACE`` (замена)."

msgid ""
"For example, the following code causes ``nil`` and ``INSERT`` to be printed "
"when the insert request is processed and causes ``[1, 'Hi']`` and ``DELETE``"
" to be printed when the delete request is processed:"
msgstr ""
"Например, следующий код вызывает вывод ``nil`` и ``INSERT`` при обработке "
"запроса на вставку и вывод ``[1, 'Hi']`` и ``DELETE`` при обработке запроса "
"на удаление:"

msgid ""
"box.schema.space.create('space_1')\n"
"box.space.space_1:create_index('space_1_index',{})\n"
"function on_replace_function (old, new, s, op) print(old) print(op) end\n"
"box.space.space_1:on_replace(on_replace_function)\n"
"box.space.space_1:insert{1,'Hi'}\n"
"box.space.space_1:delete{1}"
msgstr ""
"box.schema.space.create('space_1')\n"
"box.space.space_1:create_index('space_1_index',{})\n"
"function on_replace_function (old, new, s, op) print(old) print(op) end\n"
"box.space.space_1:on_replace(on_replace_function)\n"
"box.space.space_1:insert{1,'Hi'}\n"
"box.space.space_1:delete{1}"

msgid "**Example 3:**"
msgstr "**Пример 3:**"

msgid ""
"The following series of requests will create a space, create an index, "
"create a function which increments a counter, create a trigger, do two "
"inserts, drop the space, and display the counter value - which is 2, because"
" the function is executed once after each insert."
msgstr ""
"Следующая серия запросов создаст спейс, создаст индекс, создаст функцию, "
"которая увеличит содержимое счетчика, создаст триггер, сделает две вставки, "
"удалит спейс и отобразит значение счетчика -- 2, поскольку функция "
"выполняется однократно после каждой вставки."

msgid ""
"tarantool> s = box.schema.space.create('space53')\n"
"tarantool> s:create_index('primary', {parts = {{field = 1, type = 'unsigned'}}})\n"
"tarantool> function replace_trigger()\n"
"         >   replace_counter = replace_counter + 1\n"
"         > end\n"
"tarantool> s:on_replace(replace_trigger)\n"
"tarantool> replace_counter = 0\n"
"tarantool> t = s:insert{1, 'First replace'}\n"
"tarantool> t = s:insert{2, 'Second replace'}\n"
"tarantool> s:drop()\n"
"tarantool> replace_counter"
msgstr ""
"tarantool> s = box.schema.space.create('space53')\n"
"tarantool> s:create_index('primary', {parts = {{field = 1, type = 'unsigned'}}})\n"
"tarantool> function replace_trigger()\n"
"         >   replace_counter = replace_counter + 1\n"
"         > end\n"
"tarantool> s:on_replace(replace_trigger)\n"
"tarantool> replace_counter = 0\n"
"tarantool> t = s:insert{1, 'First replace'}\n"
"tarantool> t = s:insert{2, 'Second replace'}\n"
"tarantool> s:drop()\n"
"tarantool> replace_counter"

msgid ""
"As everything executed inside triggers is already in a transaction, you "
"shouldn't use in trigger-functions for ``on_replace`` and ``before_replace``"
msgstr ""
"Так как всё, что выполняется в триггерах, уже находится в транзакции, не "
"следует использовать в триггерных функциях ``on_replace`` и "
"``before_replace``"

msgid "transactions,"
msgstr "транзакции,"

#, fuzzy
msgid "yield-operations (:ref:`explicit <app-yields>` or not),"
msgstr ""
"операции, передающие управление (yield-operations, :ref:`явные <atomic-"
"implicit-yields>` или нет),"

msgid ""
"actions that are not allowed to be used in transactions (see :ref:`rule #2 "
"<box-txn_management>`)."
msgstr ""
"действия, которые не разрешено использовать в транзакциях (см. :ref:`правило"
" №2 <box-txn_management>`)."

msgid "**Example:**"
msgstr "**Пример:**"

msgid ""
"tarantool> box.space.test:on_replace(fiber.yield)\n"
"tarantool> box.space.test:replace{1, 2, 3}\n"
"2020-02-02 21:22:03.073 [73185] main/102/init.lua txn.c:532 E> ER_TRANSACTION_YIELD: Transaction has been aborted by a fiber yield\n"
"---\n"
"- error: Transaction has been aborted by a fiber yield\n"
"..."
msgstr ""
"tarantool> box.space.test:on_replace(fiber.yield)\n"
"tarantool> box.space.test:replace{1, 2, 3}\n"
"2020-02-02 21:22:03.073 [73185] main/102/init.lua txn.c:532 E> ER_TRANSACTION_YIELD: Transaction has been aborted by a fiber yield\n"
"---\n"
"- error: Transaction has been aborted by a fiber yield\n"
"..."
